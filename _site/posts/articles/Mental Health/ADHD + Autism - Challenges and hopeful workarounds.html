<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ADHD + Autism - Challenges and hopeful workarounds – Subhaditya’s KB</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Subhaditya’s KB</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">ADHD + Autism - Challenges and hopeful workarounds</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">ADHD + Autism - Challenges and hopeful workarounds</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">article</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="adhd-autism---challenges-possible-reasons-and-hopeful-workarounds" class="level1">
<h1>ADHD + Autism - Challenges, possible reasons and hopeful workarounds</h1>
<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<p>Finally, a manual for why I am such a wreck and how to salvage it! (Kind of.) Think of this as a lab notebook. You can pick whichever chapter you want to read. This obscenely long post is intended to be an experience log of workarounds that I have found over the years that have worked, most times atleast and their possible reasons. It is not intended to be a “oh if I do XYZ I will be free of my head~” but more of “oh~~, maybe that’s why doing XYZ broke my brain! I should remember that.”. I wrote down whatever I could (clearly hyper focusing on this now don’t judge me please) in the hopes that sharing my understanding helps you find your own. Feel free to critique (politely thank you, don’t make me cry). But more importantly, feel free to start a discussion. I’m on a journey as well. I have too much left to learn. I would love to hear your stories too. ## Disclaimers - This is not scientifically backed but is purely anecdotal. - I do “not” have my s**t together at all. Just because I wrote this huge article doesn’t mean all these points always work. Sometimes the Autism side of my head takes over and breaks down, sometimes the other. It’s a war, baby :) - It is a “spectrum” and you probably won’t relate to a few of them. - Conversely, relating to these doesn’t automatically make you have ADHD/ASD. Get a diagnosis if you can! But either ways. If it helps you, then that’s all that matters to me. - I would love to add scientific literature to these points, but I’m scared it will take long enough for me to lose motivation and never end up posting. (Help me out please?) - If you disagree with anything, comment! I’m learning too. I fully admit that I might be wrong. - I would love to have a discussion on these. Especially if you have more tips!! - Today is one of the good days. And I am writing this whole article in one go. I don’t have the courage to do it in parts. - I admit I do not have extreme symptoms. They ruin my life, but subtly sabotage it. I do not have any visible effects unless someone lives with me or sees me crying in the corner after my fourth breakdown when all I wanted to do was wash two plates so I could have lunch. My family does not know of my diagnosis. Some friends and my girlfriend do. My birth society would not accept me if they did. I am studying in a different country, so.. I have my privacy here. ## Somewhat categorised - Choose your own adventure ### Time Time blindness affects every little part of my life. But I have come to some workarounds to help me with it. Turns out, our brains update their internal clocks by changes in the environment. That was an important realisation for me. The following points relate to that. - I used to listen to a lot of lofi music while working and always felt like time would stretch out to infinity. Well, turns out it does. Because it repeats, and doesn’t change enough. Now I actively try to switch up the music a bit. - I have tried time blocking a bunch of times. But it inevitably always fails. It’s still useful though. I just have to forgive myself for not always being able to stick to it. But I tried you know? - You can use this to your advantage. If you want to slow down, make sure you have repeating things. If you want to speed up, do the opposite. - I tried having clocks everywhere but only “analog” clocks helped. Maybe because they are more visual. - Telling yourself “Okay this will take 1 hour” and then seeing that it actually took 3 is probably a good way to realise that you are setting yourself up for failure. - I have tried to explain to people that my sense of time is a little warped. I don’t think they always understand, but atleast some of them try.</p>
<section id="adhd-meds" class="level3">
<h3 class="anchored" data-anchor-id="adhd-meds">ADHD Meds</h3>
<p>I made it through 21 years without a diagnosis and forever wondering if I was completely looney. But yeah, a while back I did get one and was prescribed Ritalin. It changed my life, but it then ASD side started showing up a little more frequently. And I realized even more how chaotic my poor brain was. I am on my meds as I write this manual of course. What it helped me with: - Getting my work done, the ones I don’t care about but still have to do. - Slowing down a bit. - Having the space to see just how badly I was wrecking my life. (Cue. Also maybe helping me heal a little) - Realising that the ASD side had been suppressed a lot and maybe that’s why nothing was working out. I was focusing too much on “fixing” the ADHD side but the other side wanted all the opposites. - Helping me separately understand what the ADHD and ASD sides wanted. Not that I can fully balance their needs yet. It’s a work in progress. What it somewhat made worse - Regular meals become harder because the meds suppress my hunger. - Sometimes I forget to take the right dosage and then oh god it’s down to the bottom of the emotional well. - Now that I realise how badly the neurodivergent “spice” affected every part of my life, I’m almost angry. But I have to remember to be grateful too. Without it, I don’t think I would have come this far. - I sometimes expect it to “fix” me. But it doesn’t of course. It does help a lot though. - I have to remember to set an intention before I take them. Or I end up wasting my time anyway. But more focused.</p>
</section>
<section id="rejections" class="level3">
<h3 class="anchored" data-anchor-id="rejections">Rejections</h3>
<p>I don’t want to throw terms around, but RSD (Rejection Sensitive Dysphoria) has shadowed me all my life. Like it probably has many of you. More than anything, I realise it hurts more because we are always trying to play “catch up” with everyone else. And.. honestly… it’s very unfair. - Recently, I have been trying to have the courage to speak up and say “hey, that kind of hurt. I would appreciate some empathy.” Sometimes, it helps. - I realize the ADHD side wants to talk a lot, keep talking and enjoy. But the ASD side can’t keep up with it. It gets very overwhelmed. I talk a lot, but when someone asks me something, I freeze. Then I stutter something or just, want to disappear into the ground. - I think a lot of times, we are just expected to be able to do something. But we can’t and everyone just says “you are just lazy” when I’m not. I really want to do it. But the other side of my head wants to shut down forever. - I’m learning to take breaks. Give my ADHD side conversation but then also take my time to soothe and recover.</p>
</section>
</section>
<section id="people..-and..-forgetting-them" class="level2">
<h2 class="anchored" data-anchor-id="people..-and..-forgetting-them">People.. and.. forgetting them</h2>
<p>Another rather interesting and sad feeling I’ve had is that if I don’t interact with someone for a few days, they kind of.. disappear. I stop feeling anything for them. It’s not permanent of course. I still care a lot, and love the people I do. But, I forget to reach out. And.. they get hurt. - Most of my life, I blamed myself for being well, I dunno what. “You forgot to even text your girlfriend today, come on man. You love her right? You can’t even remember she’s there because she’s in a different country right now? Such a dumbass”. - At some point, I realized that it’s the same thing with me and cupboards. If I wanted to stop eating chips or cookies, I would keep them at the back of a cupboard and then forget they ever existed. I vaguely know they are there, I just don’t act on it or feel anything towards it. - Note to self. If you care, try to make semi regular contact. It will help you “renew the connection”. - Note to self P2. You are not a sociopath. You are neurodivergent. You still have feelings. Too many of them lol.</p>
<section id="organisation-and-planning" class="level3">
<h3 class="anchored" data-anchor-id="organisation-and-planning">Organisation and Planning</h3>
<p>Gods. I’m so bad at this it is not even funny. Some things arguably make it slightly easier though. - I realise I get frustrated because I don’t have parts of the puzzle and in spending time trying to find them, I lose all my motivation to work. So instead, I first try to collect all the information I might need for something in one place. I do not start actual work before I do. - I try not to do things in parts. I sit down and finish things in one go. If I can. - Simplify, simplify, and simplify some more. The more choices you have, the harder you make something. Pick the essentials. You cannot plan everything and you will get overwhelmed. - Ask for help. I know, I know. But it’s okay. Pick someone who might understand if you can? In time, maybe we can be better at it too.</p>
</section>
<section id="masking---general" class="level3">
<h3 class="anchored" data-anchor-id="masking---general">Masking - General</h3>
<p>I admit, I don’t fully understand to what extent this affects me. It is a lot, but maybe in time I will understand it more. - It started ages ago in school - when I didn’t look people in the eye, or when I spoke in monotone, or when I would not talk at all, or when I spoke too softly. My mom, or teachers would tell me I wasn’t “normal” and tell me what to do instead. And they would be “very” upset about it if I didn’t. So I started pretending. I would look people in the eye, I would talk louder, I would “emphasise”, heck I pretended to be emotional too sometimes. - I didn’t realise it was slowly taking over though. In time, nobody believed me anymore when I said I was different. They’d say, no you cannot have ADHD/ASD. You are too “normal”. Well, another one bites the dust I suppose. - Who are you when the dust settles and you are alone in your room crying your eyes out because it hurts so badly that nobody ever understands you? Give that person a long hug because oh god, they tried their best. - I tried so hard, and go so far, but in the end it doesn’t even matter~ . There is always a price. At the end of the day, who are you living for?</p>
</section>
<section id="masking---adhdasd" class="level3">
<h3 class="anchored" data-anchor-id="masking---adhdasd">Masking - ADHD/ASD</h3>
<p>Ah this is a nice little cocktail. Do they cancel each other out? Not really. I just feel like I am always at war with myself. I do not have workarounds yet, so I will just list down what I face instead. - I really want to do the dishes because warm soapy water is fun, but the other side wants to shut down forever and scream. - I make plans to hang out with new people, but the other side wants comfort and people I know already. - I want to plan novel experiences, new trips, new food etc, but the other side wants to do none of them and sit at home and have ramen. - I am horrible at conversations and I die inside each time someone asks me something I don’t know, but the other side of me learns to adapt so fast nobody even realises that I’m screaming inside. - One side of me has gotten too good at pretending to be normal, while the other needs days to recover from all this masking. - I technically should not be able to work as much as I do, but when I hyper focus, I am unstoppable. When I don’t, I am a carrot. - I like working on new projects, new hobbies etc, but the other side wants to sit and do the same thing everyday because new things are scary. - I beat myself up so badly and get good grades so everyone thinks I’m a genius and have it so easy because I get so much done. Ah. Well. Madame, there is always a price</p>
<p>(I think my motivation is running out now. Or maybe it’s because I didn’t have lunch yet.)</p>
</section>
<section id="social-media" class="level3">
<h3 class="anchored" data-anchor-id="social-media">Social Media</h3>
<p>I think this kinda applies to everyone. But more so to us. Doom scrolling is the bane of my existence. But I am trying to use what I have learnt about my brain to make it easier to cope. - Brain loves dopamine right? Stop giving it that. Make social media a chore. Open instagram on your browser, step back and see how “boring” all the reels are. Do you really want to watch someone make a coffee for the fourth time today? No you don’t. - Shove it in a cupboard. Forget it exists. For a while atleast. - Write instead. I would never have been able to write so much before. But ever since I replaced my doom scrolling with writing, it’s easier. - It doesn’t always work. Yeah. Sorry. You can’t fully forget about it. It’ll come back. You’ll waste hours on it. But… atleast you saved a couple.</p>
</section>
</section>
<section id="a-thank-you-note" class="level2">
<h2 class="anchored" data-anchor-id="a-thank-you-note">A thank you note</h2>
<p>There are so many people I want to thank here. I sadly do not know who most of them are. - Jessica and their team from HowToADHD (https://www.youtube.com/<span class="citation" data-cites="HowtoADHD">@HowtoADHD</span>). I am so grateful to you I want to run to you from the other end of the world and give you one huge huge huge hug. Thank you. Thank you so so much. (Am I really tearing up now? Yes.) I don’t have words but you have my eternal gratitude. - Reddit and all of you. Feeling like I am not alone here makes things a lot easier to handle. I am very grateful to you for giving me that. - Every website that gave me tips on how to manage my life. Not all of them helped of course, but they were a start.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>