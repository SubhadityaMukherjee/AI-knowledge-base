<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Summary - Notes on a Nervous Planet by Matt Haig – Subhaditya’s KB</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Subhaditya’s KB</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Summary - Notes on a Nervous Planet by Matt Haig</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Summary - Notes on a Nervous Planet by Matt Haig</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">article</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="chapterwise-summary-30-ways-to-take-back-control-notes-on-a-nervous-planet-by-matt-haig" class="level1">
<h1>Chapterwise summary + 30+ ways to take back control : Notes on a Nervous Planet by Matt Haig</h1>
<p>Notes on a nervous planet is a book that brings a lot of important points about the collective overwhelm that we as a “modern” society face. Social media, lack of sleep, odd working hours, loneliness. Neither of these were aspects that we were really prepared to deal with. But before treating a disease, we must know what the symptoms are and why they showed up in the first place. (At the end of the article, there is a long is list of what you can do to avoid overwhelm.)</p>
<p>This is a summary and my thoughts (chapter wise, mostly) on the book. I try to cover what stuck out to me the most and in turn, hope that it helps someone out. If you like the summary, you will like the book more.</p>
<p>Go support the author <a href="https://www.amazon.com/Notes-Nervous-Planet-Matt-Haig/dp/1786892677">here</a>.</p>
<p>(Note: This is not sponsored by the author and is a personal opinion that just reflects my own views. Since this is an interpretation, the author might have thought something different in a few places.)</p>
<section id="a-stressed-out-mind-in-a-stressed-out-world" class="level2">
<h2 class="anchored" data-anchor-id="a-stressed-out-mind-in-a-stressed-out-world">A stressed-out mind in a stressed-out world</h2>
<p>As society progresses, we face an overwhelming increase in everything from groceries to people to jobs and somewhere down the line it takes a huge toll on our mental health. Humans weren’t meant to deal with this constant barrage of information. If you stop and look around you, you can almost feel this underlying quit panic. The rush of everyday life, the endless calling out for attention by companies, all of these things wear you down little by little. Before, if you wanted to find out about what was happening in the world, you would look at the news and be presented with a limited selection of it. These days however, the more attention grabbing headlines are what you see. There is always something horrible happening and this triggers the part of our brains that make us feel unsafe. You might think that social media is different, but it still does the same thing doesn’t it? It keeps triggering the fear and panic that makes you feel FOMO (fear of missing out), or that someone else’s life is better. After even a few minutes, you might have noticed the guilt and sadness you feel but you can’t stop. All of these, and the added loneliness it brings, makes us feel like we are in a 24x7 catastrophe.</p>
</section>
<section id="the-big-picture" class="level2">
<h2 class="anchored" data-anchor-id="the-big-picture">The big picture</h2>
<p>Some people blame this on time and modernisation. Which is true, but at the end of the day the main reason for this insanity is just… consumerism and capitalism. Companies need to grow, and get the “big bucks” and what better way to do that but constantly keep expanding. But every expansion has a price, and in this case it’s the sanity of society and the slow extortion of our planet. In time, this mentality has seeped into every aspect of society. Our politicians glorify the “hard working families” and our companies glorify endless work hours. To what end? These goalposts are endless. And the constant comparison with everyone else that social media brings just feeds the fire. It’s come to the point that nobody is really ever satisfied. You spend years to work on a degree, and social media convinces you that traveling the world would have been a better idea. You get a great job, a new car, move to a bigger house etc, and your device shows you pictures of even more. The fuel is dissatisfaction and the fire is the need to buy. The need to keep creating and producing. Doesn’t this remind you of a factory line? ## A feeling is not your face Social media has added a lot to the constant insecurity that we face, and beauty standards have reached an almost ridiculous peak. It’s not just a couple of magazines anymore. We are constantly surrounded by unrealistic body standards. Regardless of your gender, you are shown endless options and made to subconsciously identify with either the “barbie”, “superhuman” or some other stereotype based on what you see online. Neither of these are achievable. If you go to a beach, you might think that the people around you are so concerned with how you look with your shirt off. But in all honesty, most people are thinking the same way. Most people are too concerned with their own appearance to care about yours. And then the beach itself does not care. It’s nature after all. Regardless of what your body looks like, you’re a part of it. It bears no judgement. Accepting yourself the way you are, and realising that what you see online in unreasonable, goes a pretty long way. ## Notes on time Cavemen didn’t particularly care if they were 5 minutes late to a hunting meeting. Time was not quantified to this precision. At some point the sun and the moon guided time. There was day and night, maybe afternoon. Some times were good for the hunt, the others were good for rest and community. As technology marches on, the concept of time becomes ever refined. Now not only are you always “late”, you know exactly how badly you failed within a nanosecond of accuracy. Hello guilt! Deadlines came to exist, and the constant need to check your watch or phone. Society made time an enemy. “Finish everything before the timer runs out”. Suddenly, you could never achieve enough in the time that you had. Because the more divisions we make, the more we are expected to do to fill them up. We stopped listening to our bodies and became a slave to a ticking clock. It’s time we started going back to a simpler time. ## Life overload It’s not just your sink that gets filled with dishes, your poor brain is struggling to keep up with all this work and information. There is an unnecessary excess in everything and thus your brain needs to constantly make decisions. In turn, everyone around you faces the same thing. If you look it from the outside, it’s almost as if we are all feeding that collective frenzy. The world is heading for a collective breakdown, and in our heart of hearts, we know that we are not just a part of it, we are feeding the fire too. It’s not just life, but an overload of it. ## Internet anxieties Ah the internet. Humanities craziest information. A way to “forever” and almost instantly look up anything. Any think you wanted to know, feel, see or find, all up for grabs. The biggest fuel we have added to the frenzy. But the internet is not always a bad thing is it? So many people have learnt skills, built families, found similar people, started a business and found partners through it. But they have also been pushed opinions that they never knew of. They have been fed with a constant diet of hate, choice, games of power, games of “ratings” and a desire for pretence. On the internet, nobody knows if you are a human or a dog. And it’s so much easier to bully someone if you know you are a continent away and can’t be held accountable. These exacerbate the collective overload. Because now not only do people have the power to play either the victim or the bully, they can see millions of the these stories playing out everyday. A slowly spreading poison doesn’t kill very fast, but withers you away in time. The only way to go about it is empathy. You cannot avoid the internet but you can choose what you want to actively look for. Simplify, and leave the fighting to the real world.</p>
</section>
<section id="shock-of-the-news" class="level2">
<h2 class="anchored" data-anchor-id="shock-of-the-news">Shock of the news</h2>
<p>Fear does sell though, and the news profits on that. Wars and death have always been common, but these days? You almost feel like the violence of the world has increased to a ridiculous point. You feel unsafe everywhere you go, 24x7. A few decades ago, you would get your news twice a day maybe. Now you get it every second, from every possible angle, all across the world. There’s more than 7 billion people and the stories are endless. You don’t hear about one robbery, you hear about them from 10 countries, 300 people and commented on by thousands more. Feeding the flame of anxiety again. Remember, fear sells. Try to limit your exposure to it. If something truly important happens, you will get to know.</p>
</section>
<section id="a-small-section-on-sleep-priorities" class="level2">
<h2 class="anchored" data-anchor-id="a-small-section-on-sleep-priorities">A small section on sleep priorities</h2>
<p>The part that really stuck out to me here was this “Sleep is the enemy of consumerism”. Who’s the biggest competition of Netflix? It’s SLEEP. You can’t watch a show if you’re asleep. Neither can you buy the next “greatest phone”. Likewise, you cannot produce these things. The endless factory “needs” to grow. Working hours keep getting later and later, working on weekends is a normal thing, working 16 hours is a badge of pride, we all know these don’t we? And the lesser we sleep, the more health issues we have. Catch my drift? (Hint: Healthcare is a product too you know?) Apart from healthcare, the constant panic and fear leads us to the other large businesses - Drugs and Weapons. Might as well get those good hours of sleep in right? Routines do help. And a little light movement, a warm shower, turning off the devices etc do help quite a bit. ## Phone fears I think we all have heard a lot about how our devices are affecting our lives negatively. That being the case, the more important aspect of that is understanding how to tackle it. A selection is as follows. Notifications do suck. Turn them off except for the most important ones. Spend some time away from your devices, especially before sleep. Multitasking is an illusion. Social media breeds unnecessary uncertainty. You are always left “wondering”. What is my friend doing? Did my favourite artist upload a new comic? Are there any new TikTok’s on the thing I’m currently obsessing about? The answer of course, is yes. The problem is, we cannot have everything can we? Accepting that uncertainty is a part of life helps drastically. ## The detective of despair All the effects so far seem almost too general? The best way to see how something affects you is to look at what your body is feeling. Listen to what it says. Is it telling you to stop watching people making food and go eat dinner? Is it saying that hey, I’m so tired, can you stop looking at people waking up at 6 am and taking cold showers? Listen. Breathe. ## The thinking body One rather interesting point the author makes is that of a “unit” to how much mental toll something takes : a “psychogram”. I find it a very interesting notion. Some examples the author gave are (negative and lower is better): - The sun appearing unexpectedly from behind a cloud : -57pg - Dancing : -1350pg - Arriving home after a terrible train journey : -398pg - Watching the news : 222pg - A worrying symptom you have googled : 672pg Trying to at least vaguely quantify how much we can deal with in a day before snapping can help us set better boundaries and listen to our body more. We all start off with a limited amount of energy, and some things drain more than the others. Of course, the actual quantification of it is not very useful. It’s the idea that makes it interesting to me. A reminder that we have limited resources. Like a Health Bar in a game, ours keeps going down too. We just can’t see it. ## The end of reality The more the virtual creeps in, the more choices are presented to us. Instead of going to your local store to buy a new phone, you look it up online first. Instead of being presented with one shampoo, you have 40 in a store, and 4000 online. All these choices can lead your brain to want to not compute and choose. So it turns part of itself off. It hides in “Derealisation”. Reality seems a bit wonky. The virtual world feels more like home, an uncertain, panic filled home, but home nonetheless. We must take steps to protect ourselves from this frenzy before it drowns us. ## Wanting This section ties in a lot the “beauty” one that came before. It serves as a reminder to be kinder to yourself, consider that age and time are a natural function of life itself and realise that “too much” of anything is not always a good thing. More is not a solution. The solution is acceptance and being grateful for what you have. We can never stop wanting, but if we can draw the line between what we truly “want” and what we are made to believe that we do by our consumerist economy, then we can get some control back. ## Two lists about work As a society, we like work. We base our worth on it sometimes, which is not great though. The cultural obsession we have with “hard working families” is not always a good thing though. Statistics show that the “hardest workers” aren’t always the happiest or the wealthiest. Does that say something? Choosing to have less stuff to do vs choosing to constantly be “busy” is a lot healthier. Never forget that deadlines are a product of consumerism. Imperfection is a part of humanity itself, it’s a feature, not a bug. One quote that I really liked in the book : ‘One of the symptoms of an approaching nervous breakdown is the belief that one’s work is terribly important.’ - Bertrand Russell ## Shaping the future Of course, change is hard. Most of these changes are easier said than done. And many of them are not even fully achievable by you yourself. Remembering that the space around you matters quite a bit, is also very important. We are a part of nature, and the vast openness and freedom that it brings is in our blood. Having more open space, parks and clean workspaces makes our days a little better. When we can’t escape into the woods, sometimes a good fiction book can serve that purpose. Progress is not something that happens overnight, it takes effort and time. But the peace is worth it. ## The song of you Another important reminder here, the sky is always there for you. Wherever you may be, whoever you may be. We are not separate from nature, we are nature. Your inside world is important too. Tend to the garden that is you, sing the songs that are your very being.</p>
</section>
<section id="everything-you-are-is-enough" class="level2">
<h2 class="anchored" data-anchor-id="everything-you-are-is-enough">Everything you are is enough</h2>
<p>The key takeaway really, is acceptance. Accepting that you cannot be everything, do everything, go everywhere, have everything. And even if you did, it would not really fill the void. What would is accepting the present moment, prioritising living over just existing, taking back the power and freedom that society so desperately wants to take away from us. Accepting that our failures are a part of life. Accepting that after a point, putting more work into something only has diminishing returns. Accepting that, people aren’t forever. If you want to show your love, what are you waiting for?</p>
</section>
<section id="a-list" class="level2">
<h2 class="anchored" data-anchor-id="a-list">A list</h2>
<p>That ends my summary and thoughts about the book. The author gives quite a few helpful tips dispersed among the chapters, and I thought I would list my favourites in one place. (Some are verbatim and I take no credit for them.) 1. Happiness is felt heading out, not in 2. Happiness is about what we already have 3. Maybe the point of life is to embrace life’s beautiful uncertainty. 4. Products that make us ashamed of our age, don’t actually help us not age 5. The beach does not care what you look like 6. Young people are more worried about age than young 7. Acceptance &gt; Denial in the long run 8. Feeling something doesn’t mean that it’s the absolute truth. It’s just a feeling 9. The empty joy of likes is… empty 10. Posting about experiences instead of having experiences is not great 11. Don’t type your symptoms into Google 12. What is real on the Internet, isn’t always true 13. Social media abstinence is good for you 14. You cannot understand someone through Intsagram 15. Ratings are not worth the judgement 16. Don’t be steered towards being a caricature of yourself by the internet 17. Algorithms eat empathy 18. Limit the number of times you get the news 19. The world is not as violent as it feels 20. Bad news doesn’t mean good news doesn’t happen 21. Sleep is the enemy of consumerism 22. The imperfections of the real world fill the void that the perfections of the virtual do not 23. Being lonely sometimes is not bad 24. You don’t always have to be available 25. Uncertainty is not going to go away 26. Be your own friend 27. Don’t grab life by the throat. 28. Too many choices trigger your fight or flight response. 29. You cannot be everything 30. Work isn’t the point of life. It’s the point of capitalism. You are replaceable to your work, not your family. 31. Aim to have less stuff to do. 32. Nature is always there for you. So are animals</p>
</section>
<section id="fin" class="level2">
<h2 class="anchored" data-anchor-id="fin">Fin</h2>
<p>And again, if you liked my summary, you will like the original book more. You wouldn’t read Wikipedia and feel like you watched a movie would you? Support the author!</p>
<p>This article is in the hopes that it will help someone out. Maybe have the help that I did not. I do not know who it will reach. But to whoever it does, best of luck :)</p>
<p>Like these/Want more? Buy me a coffee! <a href="https://ko-fi.com/subhadityamukherjee">Kofi</a></p>
<p>Want articles on something specific? Just ask!</p>
<p>You can always contact me on <a href="https://www.linkedin.com/in/subhaditya-mukherjee-a36883100">LinkedIn</a>, or drop me an <a href="mailto:msubhaditya@gmail.com">Email</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>